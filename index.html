<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Great Data Sort</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background: #1a202c;
        background: radial-gradient(circle at top right, #3b82f6, transparent),
          radial-gradient(circle at bottom left, #ef4444, transparent), #1a202c;
      }

      /* Custom CSS untuk Animasi dan Efek */
      .data-item {
        transition: all 0.3s ease-in-out;
      }

      .data-item:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.1);
          opacity: 0.8;
        }
      }
      .animate-pulse-fast {
        animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      @keyframes move-up {
        from {
          transform: translateY(100px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      .animate-move-up {
        animation: move-up 0.5s ease-out;
      }

      .temp-item-container {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 10;
      }

      /* Responsiveness untuk layout */
      @media (max-width: 1024px) {
        .lg\\:flex-row {
          flex-direction: column;
        }
        .lg\\:w-1\\/3 {
          width: 100%;
        }
        .lg\\:items-center {
          align-items: center;
        }
        .lg\\:justify-around {
          justify-content: center;
        }
        .min-h-80 {
          min-height: 20rem; /* Sesuaikan tinggi untuk tampilan mobile */
        }
      }
    </style>
  </head>
  <body class="text-white min-h-screen flex items-center justify-center p-4">
    <div
      class="bg-gray-900 rounded-3xl p-8 max-w-5xl w-full shadow-2xl border border-gray-700"
    >
      <!-- Judul dan Instruksi -->
      <div class="text-center mb-10">
        <h1
          class="text-5xl font-extrabold text-white mb-2 tracking-wide drop-shadow-md"
        >
          The Great Data Sort
        </h1>
        <p class="text-gray-400 text-lg">
          Gunakan operasi **Stack** dan **Queue** untuk menyusun angka!
        </p>
        <p class="text-sm mt-4 text-gray-500 max-w-2xl mx-auto">
          Tugas Anda: Pindahkan angka dari
          <span class="text-yellow-400 font-semibold">Tumpukan Awal</span> ke
          <span class="text-green-400 font-semibold">Tumpukan Akhir</span>
          dengan urutan yang sesuai dengan **Target**.
        </p>
      </div>

      <!-- Area Game: Tumpukan dan Antrean -->
      <div
        class="flex flex-col lg:flex-row justify-around items-end lg:items-center gap-8 mb-10"
      >
        <!-- Tumpukan Awal -->
        <div
          id="startingStackContainer"
          class="bg-blue-900 bg-opacity-30 backdrop-blur-sm p-6 rounded-3xl shadow-lg w-full lg:w-1/3 flex flex-col-reverse items-center justify-start min-h-80 relative border border-blue-700"
        >
          <div
            class="absolute top-4 left-1/2 -translate-x-1/2 text-white text-lg font-bold"
          >
            Tumpukan Awal
          </div>
          <!-- Data akan ditampilkan di sini -->
        </div>

        <!-- Antrean -->
        <div
          id="queueContainer"
          class="bg-red-900 bg-opacity-30 backdrop-blur-sm p-6 rounded-3xl shadow-lg w-full lg:w-1/3 flex flex-row items-center justify-start min-h-24 relative border border-red-700"
        >
          <div
            class="absolute top-4 left-1/2 -translate-x-1/2 text-white text-lg font-bold"
          >
            Antrean
          </div>
          <!-- Data akan ditampilkan di sini -->
        </div>

        <!-- Tumpukan Target -->
        <div
          id="targetStackContainer"
          class="bg-green-900 bg-opacity-30 backdrop-blur-sm p-6 rounded-3xl shadow-lg w-full lg:w-1/3 flex flex-col-reverse items-center justify-start min-h-80 relative border border-green-700"
        >
          <div
            class="absolute top-4 left-1/2 -translate-x-1/2 text-white text-lg font-bold"
          >
            Tumpukan Target
          </div>
          <!-- Data akan ditampilkan di sini -->
        </div>
      </div>

      <!-- Target & Status -->
      <div class="text-center mb-10">
        <div
          class="flex flex-col sm:flex-row justify-center items-center gap-6"
        >
          <div
            class="bg-gray-800 rounded-full px-6 py-3 text-sm text-yellow-300 font-bold shadow-md border border-gray-700"
          >
            Target:
            <span id="targetDisplay" class="font-normal text-white"></span>
          </div>
          <div
            class="bg-gray-800 rounded-full px-6 py-3 text-sm font-bold shadow-md border border-gray-700"
          >
            Langkah:
            <span id="movesDisplay" class="text-white font-normal">0</span>
          </div>
        </div>
        <p
          id="messageDisplay"
          class="text-xl mt-6 font-extrabold text-green-400 drop-shadow-lg"
        ></p>
      </div>

      <!-- Tombol Operasi -->
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mt-8">
        <button
          id="popBtn"
          class="bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-8 rounded-full transition-all duration-300 shadow-xl transform hover:scale-105"
        >
          Pop
        </button>
        <button
          id="enqueueBtn"
          class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-full transition-all duration-300 shadow-xl transform hover:scale-105"
        >
          Enqueue
        </button>
        <button
          id="dequeueBtn"
          class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-full transition-all duration-300 shadow-xl transform hover:scale-105"
        >
          Dequeue
        </button>
        <button
          id="pushBtn"
          class="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full transition-all duration-300 shadow-xl transform hover:scale-105"
        >
          Push
        </button>
      </div>
      <div class="flex justify-center mt-6">
        <button
          id="resetBtn"
          class="bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-full transition-colors duration-200 shadow-lg"
        >
          Mulai Ulang
        </button>
      </div>
    </div>
    <div
      id="tempItemContainer"
      class="temp-item-container flex flex-col items-center gap-2 hidden"
    >
      <div
        id="tempItem"
        class="data-item bg-yellow-400 text-black font-bold rounded-lg p-3 w-20 text-center animate-pulse-fast shadow-2xl"
      ></div>
      <p class="text-gray-300 text-sm font-semibold animate-pulse-fast">
        Dipilih...
      </p>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Representasi data: Stack, Queue, dan item sementara
        let startingStack = [];
        let queue = [];
        let targetStack = [];
        let tempItem = null;
        let moves = 0;

        // Elemen UI
        const startingStackContainer = document.getElementById(
          "startingStackContainer"
        );
        const queueContainer = document.getElementById("queueContainer");
        const targetStackContainer = document.getElementById(
          "targetStackContainer"
        );
        const tempItemContainer = document.getElementById("tempItemContainer");
        const tempItemEl = document.getElementById("tempItem");
        const messageDisplay = document.getElementById("messageDisplay");
        const targetDisplay = document.getElementById("targetDisplay");
        const movesDisplay = document.getElementById("movesDisplay");
        const popBtn = document.getElementById("popBtn");
        const enqueueBtn = document.getElementById("enqueueBtn");
        const dequeueBtn = document.getElementById("dequeueBtn");
        const pushBtn = document.getElementById("pushBtn");
        const resetBtn = document.getElementById("resetBtn");

        // Fungsi untuk mengacak array secara acak
        function shuffle(array) {
          for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
          }
          return array;
        }

        // Fungsi untuk inisialisasi atau mereset game
        function initializeGame() {
          const numbers = Array.from({ length: 10 }, (_, i) => i + 1);
          startingStack = shuffle(numbers);
          queue = [];
          targetStack = [];
          tempItem = null;
          moves = 0;

          // Target selalu berurutan 1-10
          const target = Array.from({ length: 10 }, (_, i) => i + 1);
          targetDisplay.textContent = target.join(", ");
          movesDisplay.textContent = moves;
          messageDisplay.textContent = "";

          // Render ulang UI
          updateUI();
        }

        // Fungsi untuk memperbarui tampilan UI
        function updateUI() {
          // Render tumpukan awal
          renderStack(startingStack, startingStackContainer);

          // Render antrean
          renderQueue(queue, queueContainer);

          // Render tumpukan target
          renderStack(targetStack, targetStackContainer);

          // Perbarui tampilan item sementara
          if (tempItem !== null) {
            tempItemEl.textContent = tempItem;
            tempItemContainer.classList.remove("hidden");
          } else {
            tempItemContainer.classList.add("hidden");
          }

          // Perbarui status tombol
          updateButtonStates();
        }

        // Fungsi untuk merender Stack (tumpukan)
        function renderStack(data, container) {
          container.innerHTML = `<div class="absolute top-4 left-1/2 -translate-x-1/2 text-white text-lg font-bold">${
            container.id === "startingStackContainer"
              ? "Tumpukan Awal"
              : "Tumpukan Target"
          }</div>`;
          data.forEach((item) => {
            const div = document.createElement("div");
            div.className =
              "data-item bg-gray-500 text-white font-bold rounded-lg p-3 w-20 text-center shadow-md mb-2 animate-move-up";
            div.textContent = item;
            container.appendChild(div);
          });
        }

        // Fungsi untuk merender Queue (antrean)
        function renderQueue(data, container) {
          container.innerHTML = `<div class="absolute top-4 left-1/2 -translate-x-1/2 text-white text-lg font-bold">Antrean</div>`;
          data.forEach((item) => {
            const div = document.createElement("div");
            div.className =
              "data-item bg-gray-500 text-white font-bold rounded-lg p-3 w-20 text-center shadow-md mr-2";
            div.textContent = item;
            container.appendChild(div);
          });
        }

        // Fungsi untuk memperbarui status tombol
        function updateButtonStates() {
          popBtn.disabled = startingStack.length === 0 || tempItem !== null;
          enqueueBtn.disabled = tempItem === null;
          dequeueBtn.disabled = queue.length === 0 || tempItem !== null;
          pushBtn.disabled = tempItem === null;

          // Tambahkan efek visual disable
          const allButtons = [popBtn, enqueueBtn, dequeueBtn, pushBtn];
          allButtons.forEach((btn) => {
            if (btn.disabled) {
              btn.classList.add("opacity-50", "cursor-not-allowed");
              btn.classList.remove(
                "hover:bg-red-700",
                "hover:bg-blue-700",
                "hover:bg-green-700",
                "transform",
                "hover:scale-105"
              );
            } else {
              btn.classList.remove("opacity-50", "cursor-not-allowed");
              if (btn.id === "popBtn")
                btn.classList.add(
                  "hover:bg-red-700",
                  "transform",
                  "hover:scale-105"
                );
              else if (btn.id === "enqueueBtn" || btn.id === "dequeueBtn")
                btn.classList.add(
                  "hover:bg-blue-700",
                  "transform",
                  "hover:scale-105"
                );
              else if (btn.id === "pushBtn")
                btn.classList.add(
                  "hover:bg-green-700",
                  "transform",
                  "hover:scale-105"
                );
            }
          });
        }

        // Fungsi untuk memeriksa kondisi kemenangan
        function checkWinCondition() {
          const target = Array.from({ length: 10 }, (_, i) => i + 1);
          const targetString = target.join(",");
          const currentString = targetStack.join(",");

          if (
            currentString === targetString &&
            startingStack.length === 0 &&
            queue.length === 0 &&
            tempItem === null
          ) {
            messageDisplay.textContent = `🎉 Selamat, Anda berhasil dalam ${moves} langkah!`;
            messageDisplay.classList.remove("text-red-400", "text-yellow-400");
            messageDisplay.classList.add("text-green-400");
            popBtn.disabled = true;
            enqueueBtn.disabled = true;
            dequeueBtn.disabled = true;
            pushBtn.disabled = true;
            updateButtonStates();
          } else if (
            startingStack.length === 0 &&
            tempItem === null &&
            queue.length === 0 &&
            targetStack.length < target.length
          ) {
            messageDisplay.textContent =
              "❌ Gagal! Tidak ada data yang tersisa untuk melanjutkan.";
            messageDisplay.classList.remove(
              "text-green-400",
              "text-yellow-400"
            );
            messageDisplay.classList.add("text-red-400");
            updateButtonStates();
          }
        }

        // Event Listeners untuk tombol
        popBtn.addEventListener("click", () => {
          if (startingStack.length > 0) {
            tempItem = startingStack.pop();
            moves++;
            movesDisplay.textContent = moves;
            updateUI();
          } else {
            messageDisplay.textContent = "Tumpukan awal kosong!";
            messageDisplay.classList.remove("text-green-400", "text-red-400");
            messageDisplay.classList.add("text-yellow-400");
          }
        });

        enqueueBtn.addEventListener("click", () => {
          if (tempItem !== null) {
            queue.push(tempItem);
            tempItem = null;
            moves++;
            movesDisplay.textContent = moves;
            updateUI();
          } else {
            messageDisplay.textContent = "Tidak ada item untuk di-enqueue!";
            messageDisplay.classList.remove("text-green-400", "text-red-400");
            messageDisplay.classList.add("text-yellow-400");
          }
        });

        dequeueBtn.addEventListener("click", () => {
          if (queue.length > 0) {
            tempItem = queue.shift();
            moves++;
            movesDisplay.textContent = moves;
            updateUI();
          } else {
            messageDisplay.textContent = "Antrean kosong!";
            messageDisplay.classList.remove("text-green-400", "text-red-400");
            messageDisplay.classList.add("text-yellow-400");
          }
        });

        pushBtn.addEventListener("click", () => {
          if (tempItem !== null) {
            // Periksa apakah item yang akan di-push adalah item target berikutnya
            const nextTarget = targetStack.length + 1;
            if (tempItem === nextTarget) {
              targetStack.push(tempItem);
              tempItem = null;
              moves++;
              movesDisplay.textContent = moves;
              updateUI();
              checkWinCondition();
            } else {
              messageDisplay.textContent = `❌ Item salah! Target berikutnya adalah ${nextTarget}.`;
              messageDisplay.classList.remove(
                "text-green-400",
                "text-yellow-400"
              );
              messageDisplay.classList.add("text-red-400");
            }
          } else {
            messageDisplay.textContent = "Tidak ada item untuk di-push!";
            messageDisplay.classList.remove("text-green-400", "text-red-400");
            messageDisplay.classList.add("text-yellow-400");
          }
        });

        resetBtn.addEventListener("click", initializeGame);

        // Inisialisasi game saat halaman dimuat
        initializeGame();
      });
    </script>
  </body>
</html>
